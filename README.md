# Java-Filmorate

![Java](https://img.shields.io/badge/Java-17-blue)
![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.0-brightgreen)
![Maven](https://img.shields.io/badge/Maven-3.9.0-orange)
![License](https://img.shields.io/badge/License-MIT-lightgrey)

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–ª—å–º–∞–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –æ—Ü–µ–Ω–∫–∞–º–∏ ‚Äî –æ—Ç –¥—Ä—É–∂–±—ã –¥–æ –ª—é–±–∏–º—ã—Ö –∂–∞–Ω—Ä–æ–≤.  
–°–æ–∑–¥–∞–Ω–æ, —á—Ç–æ–±—ã –¥–µ–ª–∏—Ç—å—Å—è –∫–∏–Ω–æ–º–∏—Ä–æ–º —Å –¥—Ä—É–≥–∏–º–∏ –∏ –Ω–∞—Ö–æ–¥–∏—Ç—å –∏–¥–µ–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.

---

## –û–ø–∏—Å–∞–Ω–∏–µ üé¨

Java-Filmorate ‚Äî —ç—Ç–æ RESTful-—Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∏–ª—å–º–∞–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.  
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å —Ñ–∏–ª—å–º—ã, —Å—Ç–∞–≤–∏—Ç—å –æ—Ü–µ–Ω–∫–∏, –∑–∞–≤–æ–¥–∏—Ç—å –¥—Ä—É–∑–µ–π –∏ –ø–æ–ª—É—á–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.  
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–æ –Ω–∞ **Spring Boot**, —Å —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç–∏ (–≤ –±—É–¥—É—â–µ–º –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö).

---

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª ‚ú®

- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ üë§
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–æ–≤ üé•
- –û—Ü–µ–Ω–∫–∞ —Ñ–∏–ª—å–º–æ–≤ –∏ —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π üåü
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥—Ä—É–∑—å—è–º–∏ ü§ù
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –∂–∞–Ω—Ä—ã —Ñ–∏–ª—å–º–æ–≤ üè∑Ô∏è

---

## –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π üõ†Ô∏è

- **Java 17** ‚òï
- **Spring Boot 3** üå±
- **Maven** üì¶
- **Lombok** ‚úèÔ∏è
- **JUnit 5** üß™

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ üìÇ
```text
src/
‚îú‚îÄ main/
‚îÇ ‚îú‚îÄ java/ru/yandex/practicum/filmorate/
‚îÇ ‚îÇ ‚îú‚îÄ controller/ # REST-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îÇ ‚îÇ ‚îú‚îÄ model/ # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ ‚îÇ ‚îú‚îÄ storage/ # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏/—Ö—Ä–∞–Ω–∏–ª–∏—â–∞
‚îÇ ‚îÇ ‚îî‚îÄ service/ # –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π
‚îÇ ‚îî‚îÄ resources/
‚îÇ ‚îî‚îÄ application.properties
‚îî‚îÄ test/ # Unit-—Ç–µ—Å—Ç—ã
```


---

## –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ ‚ñ∂Ô∏è

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
git clone https://github.com/N1IKITA2212/java-filmorate.git
```

2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–µ–∫—Ç–∞

```bash
cd java-filmorate
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ **Maven**
```bash
mvn spring-boot:run
```
4. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É http://localhost:8080

## API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ | –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ | –û—Ç–≤–µ—Ç |
|-------|-----|----------|--------------|-------|
| GET | `/users` | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | ‚Äî | JSON-–º–∞—Å—Å–∏–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| GET | `/users/{id}` | –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID | ‚Äî | JSON –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| POST | `/users` | –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | JSON —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | JSON —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| PUT | `/users` | –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | JSON —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | JSON –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| DELETE | `/users/{id}` | –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | ‚Äî | –°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞ |
| PUT | `/users/{id}/friends/{friendId}` | –î–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∞ | ‚Äî | JSON –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º —Å–ø–∏—Å–∫–æ–º –¥—Ä—É–∑–µ–π |
| DELETE | `/users/{id}/friends/{friendId}` | –£–¥–∞–ª–∏—Ç—å –¥—Ä—É–≥–∞ | ‚Äî | JSON –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º —Å–ø–∏—Å–∫–æ–º –¥—Ä—É–∑–µ–π |
| GET | `/users/{id}/friends` | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | ‚Äî | JSON-–º–∞—Å—Å–∏–≤ –¥—Ä—É–∑–µ–π |
| GET | `/users/{id}/friends/common/{otherId}` | –ü–æ–ª—É—á–∏—Ç—å –æ–±—â–∏—Ö –¥—Ä—É–∑–µ–π —Å –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º | ‚Äî | JSON-–º–∞—Å—Å–∏–≤ –æ–±—â–∏—Ö –¥—Ä—É–∑–µ–π |
| GET | `/films` | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–∏–ª—å–º–æ–≤ | ‚Äî | JSON-–º–∞—Å—Å–∏–≤ —Ñ–∏–ª—å–º–æ–≤ |
| GET | `/films/{id}` | –ü–æ–ª—É—á–∏—Ç—å —Ñ–∏–ª—å–º –ø–æ ID | ‚Äî | JSON —Ñ–∏–ª—å–º–∞ |
| POST | `/films` | –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ñ–∏–ª—å–º | JSON —Å –¥–∞–Ω–Ω—ã–º–∏ —Ñ–∏–ª—å–º–∞ | JSON —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —Ñ–∏–ª—å–º–∞ |
| PUT | `/films` | –û–±–Ω–æ–≤–∏—Ç—å —Ñ–∏–ª—å–º | JSON —Å –¥–∞–Ω–Ω—ã–º–∏ —Ñ–∏–ª—å–º–∞ | JSON –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ —Ñ–∏–ª—å–º–∞ |
| DELETE | `/films/{id}` | –£–¥–∞–ª–∏—Ç—å —Ñ–∏–ª—å–º | ‚Äî | –°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞ |
| PUT | `/films/{id}/like/{userId}` | –ü–æ—Å—Ç–∞–≤–∏—Ç—å –ª–∞–π–∫ —Ñ–∏–ª—å–º—É | ‚Äî | JSON —Ñ–∏–ª—å–º–∞ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º —á–∏—Å–ª–æ–º –ª–∞–π–∫–æ–≤ |
| DELETE | `/films/{id}/like/{userId}` | –£–±—Ä–∞—Ç—å –ª–∞–π–∫ —Å —Ñ–∏–ª—å–º–∞ | ‚Äî | JSON —Ñ–∏–ª—å–º–∞ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º —á–∏—Å–ª–æ–º –ª–∞–π–∫–æ–≤ |
| GET | `/films/popular?count={n}` | –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ø-N –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ñ–∏–ª—å–º–æ–≤ | ‚Äî | JSON-–º–∞—Å—Å–∏–≤ —Ñ–∏–ª—å–º–æ–≤ |

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ üß™
–î–ª—è –∑–∞–ø—É—Å–∫–∞ unit-—Ç–µ—Å—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
```bash
mvn test
```

---


## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**Filmorate** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö, —Ñ–∏–ª—å–º–∞—Ö, –∂–∞–Ω—Ä–∞—Ö –∏ —Å–≤—è–∑—è—Ö –º–µ–∂–¥—É –Ω–∏–º–∏.

### ER-–¥–∏–∞–≥—Ä–∞–º–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
![filmorate_database.svg](filmorate_database.svg)

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

#### `user`
–•—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö:

- `user_id` *(PK)* ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `email` ‚Äî –∞–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã
- `login` ‚Äî –ª–æ–≥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `name` ‚Äî –∏–º—è
- `birthday` ‚Äî –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è

#### `film`
–•—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –æ —Ñ–∏–ª—å–º–∞—Ö:

- `film_id` *(PK)* ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ñ–∏–ª—å–º–∞
- `name` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ
- `description` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ
- `duration` ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–≤ –º–∏–Ω—É—Ç–∞—Ö)
- `releaseDate` ‚Äî –¥–∞—Ç–∞ –≤—ã—Ö–æ–¥–∞
- `genre_id` *(FK ‚Üí genre.genre_id)* ‚Äî –∂–∞–Ω—Ä
- `rating_id` *(FK ‚Üí rating.rating_id)* ‚Äî —Ä–µ–π—Ç–∏–Ω–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, G, PG-13, R)

#### `genre`
–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∂–∞–Ω—Ä–æ–≤:

- `genre_id` *(PK)* ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∂–∞–Ω—Ä–∞
- `name` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –∂–∞–Ω—Ä–∞

#### `rating`
–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã—Ö —Ä–µ–π—Ç–∏–Ω–≥–æ–≤:

- `rating_id` *(PK)* ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ä–µ–π—Ç–∏–Ω–≥–∞
- `name` ‚Äî –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ‚ÄúPG-13‚Äù)

#### `friendship`
–û—Ç—Ä–∞–∂–∞–µ—Ç –¥—Ä—É–∂–µ—Å–∫–∏–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏:

- `user_id` *(FK ‚Üí user.user_id)* ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- `friend_id` *(FK ‚Üí user.user_id)* ‚Äî –µ–≥–æ –¥—Ä—É–≥
- `isAccepted` ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ –ª–∏ –¥—Ä—É–∂–±–∞

#### `film_likes`
–§–∏–∫—Å–∏—Ä—É–µ—Ç, –∫–∞–∫–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ—Å—Ç–∞–≤–∏–ª–∏ –ª–∞–π–∫ —Ñ–∏–ª—å–º—É:

- `user_id` *(FK ‚Üí user.user_id)*
- `film_id` *(FK ‚Üí film.film_id)*

#### `film_genre`
–°–≤—è–∑—å ‚Äú–º–Ω–æ–≥–∏–µ –∫–æ –º–Ω–æ–≥–∏–º‚Äù –º–µ–∂–¥—É —Ñ–∏–ª—å–º–∞–º–∏ –∏ –∂–∞–Ω—Ä–∞–º–∏:

- `film_id` *(FK ‚Üí film.film_id)*
- `genre_id` *(FK ‚Üí genre.genre_id)*

---

## üí° –ü—Ä–∏–º–µ—Ä—ã SQL-–∑–∞–ø—Ä–æ—Å–æ–≤

### üé¨ 1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ñ–∏–ª—å–º—ã
**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `GET /films`  
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–∏–ª—å–º–æ–≤ —Å –∂–∞–Ω—Ä–∞–º–∏ –∏ —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏.

```sql
SELECT f.film_id,
       f.name,
       f.description,
       f.releaseDate,
       f.duration,
       g.name  AS genre,
       r.name  AS rating
FROM film f
LEFT JOIN genre g ON f.genre_id = g.genre_id
LEFT JOIN rating r ON f.rating_id = r.rating_id;
```

### üé• 2. –ü–æ–ª—É—á–∏—Ç—å —Ñ–∏–ª—å–º –ø–æ ID
**–≠–Ω–¥–ø–æ–∏–Ω—Ç** `GET /films/{id}`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ–∏–ª—å–º–µ –ø–æ –µ–≥–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É
```sql
SELECT f.film_id,
       f.name,
       f.description,
       f.releaseDate,
       f.duration,
       g.name  AS genre,
       r.name  AS rating
FROM film f
LEFT JOIN genre g ON f.genre_id = g.genre_id
LEFT JOIN rating r ON f.rating_id = r.rating_id
WHERE f.film_id = :id;
```

### üßë‚Äçü§ù‚Äçüßë 3. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
**–≠–Ω–¥–ø–æ–∏–Ω—Ç** `GET /users/{id}/friends`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ—Ö –¥—Ä—É–∑–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```sql
SELECT u.user_id,
       u.name,
       u.login,
       u.email
FROM friendship fr
JOIN user u ON fr.friend_id = u.user_id
WHERE fr.user_id = :id AND fr.isAccepted = TRUE;
```
---
## –ê–≤—Ç–æ—Ä
 - **Github:** [Nikita German](https://github.com/N1IKITA2212)